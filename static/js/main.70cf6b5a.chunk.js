(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{30:function(e,t,c){},31:function(e,t,c){},32:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(25),o=c.n(r),a=(c(30),c(12)),i=c(3),s=(c(31),c(14)),l=c(5),b=(c(32),c(2)),u=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],r=t[1],o=Object(n.useState)("Show Active"),u=Object(l.a)(o,2),d=u[0],j=u[1],h=Object(i.n)(),O=function(e){h("/add-book/".concat(e))};function m(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(new Date(e))}Object(n.useEffect)((function(){fetch("http://localhost:3000/books").then((function(e){return e.json()})).then((function(e){return r(e)})).catch((function(e){return console.error(e)}))}),[]);var f=function(e,t){var n,o=c.map((function(c){return c.id===e?Object(s.a)(Object(s.a)({},c),{},{active:t}):c}));r(o),n=o.find((function(t){return t.id===e})),fetch("http://localhost:3000/books/".concat(n.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw new Error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u0456 \u043a\u043d\u0438\u0433\u0438");r((function(e){return e.map((function(e){return e.id===n.id?n:e}))}))})).catch((function(e){return e}))},x=function(e){var t=c.filter((function(t){return t.id!==e}));!function(e,t){fetch("http://localhost:3000/books/".concat(e),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u0456 \u043a\u043d\u0438\u0433\u0438");r(t)})).catch((function(e){return e}))}(e,t)},p=function(){switch(d){case"Show All":return c;case"Show Active":return c.filter((function(e){return e.active}));case"Show Deactivated":return c.filter((function(e){return!e.active}));default:return c}},k=p().length,v=c.length;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"header",children:[Object(b.jsxs)("label",{htmlFor:"filter",className:"header__filter",children:["Filter:"," ",Object(b.jsxs)("select",{id:"filter",className:"header__filterSelect",value:d,onChange:function(e){return j(e.target.value)},children:[Object(b.jsx)("option",{value:"Show All",children:"Show All"}),Object(b.jsx)("option",{value:"Show Active",children:"Show Active"}),Object(b.jsx)("option",{value:"Show Deactivated",children:"Show Deactivated"})]})]}),Object(b.jsxs)("span",{className:"record-info",children:["Showing"," ",k," ","of"," ",v]})]}),Object(b.jsx)("div",{className:"centeredContainer",children:Object(b.jsx)(a.b,{to:"/add-book",className:"addBookLink",children:"Add a Book"})}),Object(b.jsxs)("table",{className:"bookTable",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Book title"}),Object(b.jsx)("th",{children:"Author name"}),Object(b.jsx)("th",{children:"Category"}),Object(b.jsx)("th",{children:"ISBN"}),Object(b.jsx)("th",{children:"Created At"}),Object(b.jsx)("th",{children:"Modified/Edited At"}),Object(b.jsx)("th",{children:"Actions"})]})}),Object(b.jsx)("tbody",{children:p().map((function(e){return Object(b.jsxs)("tr",{className:e.active?"":"deactivated",children:[Object(b.jsx)("td",{children:e.title}),Object(b.jsx)("td",{children:e.author}),Object(b.jsx)("td",{children:e.category}),Object(b.jsx)("td",{children:e.isbn}),Object(b.jsx)("td",{children:m(e.createdAt)}),Object(b.jsx)("td",{children:m(e.modifiedAt)}),Object(b.jsxs)("td",{children:[Object(b.jsx)("button",{type:"button",onClick:O.bind(null,e.id),children:"Edit"}),e.active&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{type:"button",onClick:function(){return t=e.id,void f(t,!1);var t},children:"Deactivate"}),Object(b.jsx)("button",{type:"button",disabled:!0,children:"Delete"})]}),!e.active&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{type:"button",onClick:function(){return t=e.id,void f(t,!0);var t},children:"Activate"}),Object(b.jsx)("button",{type:"button",onClick:function(){return x(e.id)},children:"Delete"})]}),e.active?"Deactivate":"Re-Activate"]})]},e.id)}))})]}),Object(b.jsx)("footer",{className:"footer",children:Object(b.jsx)("a",{href:"https://github.com/11Olya112",target:"_blank",className:"footer__link",rel:"noreferrer",children:"Visit my GitHub"})})]})},d=c(6),j=c(4),h=c.n(j),O=c(7),m=(c(35),function(){var e=Object(i.n)(),t=Object(i.p)().bookId,c=Object(n.useState)({title:"",author:"",category:"",isbn:""}),r=Object(l.a)(c,2),o=r[0],a=r[1],u=Object(n.useState)({}),j=Object(l.a)(u,2),m=j[0],f=j[1],x=Object(n.useState)(""),p=Object(l.a)(x,2),k=p[0],v=p[1],y=Object(n.useState)(""),g=Object(l.a)(y,2),_=g[0],N=g[1];Object(n.useEffect)((function(){t&&function(){var e=Object(O.a)(h.a.mark((function e(){var c,n,r,o,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/books/".concat(t));case 3:if(!(c=e.sent).ok){e.next=15;break}return e.next=7,c.json();case 7:n=e.sent,r=n.title,o=n.author,i=n.category,s=n.isbn,a({title:r,author:o,category:i,isbn:s}),e.next=16;break;case 15:throw new Error("Failed to fetch book data.");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var F=function(e){var t=e.target,c=t.name,n=t.value;a((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(d.a)({},c,n))}))};return Object(b.jsxs)("div",{children:[Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(){var e={};return o.title||(e.title="Title is required"),o.author||(e.author="Author is required"),o.category||(e.category="Category is required"),o.isbn||(e.isbn="ISBN is required"),f(e),0===Object.keys(e).length}()&&fetch("http://localhost:3000/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(t){t.ok?(v("Book added successfully!"),e("/")):N("Failed to add book.")})).catch((function(e){N(e.message||"An error occurred. Please try again.")}))},className:"bookForm",children:[Object(b.jsx)("div",{className:"bookForm__group",children:Object(b.jsxs)("label",{htmlFor:"title",className:"bookForm__label",children:["Book title:"," ",Object(b.jsx)("input",{type:"text",id:"title",name:"title",value:o.title,required:!0,onChange:F,className:"bookForm__input"}),m.title&&Object(b.jsx)("span",{className:"bookForm__error",children:m.title})]})}),Object(b.jsx)("div",{className:"bookForm__group",children:Object(b.jsxs)("label",{htmlFor:"author",className:"bookForm__label",children:["Author name:"," ",Object(b.jsx)("input",{type:"text",id:"author",name:"author",value:o.author,required:!0,onChange:F,className:"bookForm__input"}),m.author&&Object(b.jsx)("span",{className:"bookForm__error",children:m.author})]})}),Object(b.jsx)("div",{className:"bookForm__group",children:Object(b.jsxs)("label",{htmlFor:"category",className:"bookForm__label",children:["Category:"," ",Object(b.jsxs)("select",{id:"category",name:"category",value:o.category,required:!0,onChange:F,className:"bookForm__input",children:[Object(b.jsx)("option",{value:"",children:"Select category"}),Object(b.jsx)("option",{value:"Fiction",children:"Fiction"}),Object(b.jsx)("option",{value:"Non-fiction",children:"Non-fiction"}),Object(b.jsx)("option",{value:"Sci-Fi",children:"Sci-Fi"})]}),m.category&&Object(b.jsx)("span",{className:"bookForm__error",children:m.category})]})}),Object(b.jsx)("div",{className:"bookForm__group",children:Object(b.jsxs)("label",{htmlFor:"isbn",className:"bookForm__label",children:["ISBN:"," ",Object(b.jsx)("input",{type:"number",id:"isbn",name:"isbn",value:o.isbn,required:!0,onChange:F,className:"bookForm__input"}),m.isbn&&Object(b.jsx)("span",{className:"bookForm__error",children:m.isbn})]})}),Object(b.jsx)("button",{type:"submit",className:"bookForm__button",children:"Add a Book"})]}),k&&Object(b.jsx)("p",{children:"Book added successfully!"}),_&&Object(b.jsx)("p",{children:_})]})}),f=function(){return Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{path:"/",Component:u}),Object(b.jsx)(i.a,{path:"/add-book",Component:m}),Object(b.jsx)(i.a,{path:"/add-book/:bookId",Component:m})]})};o.a.render(Object(b.jsx)(a.a,{children:Object(b.jsx)(f,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.70cf6b5a.chunk.js.map